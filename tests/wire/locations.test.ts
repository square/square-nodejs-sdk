/**
 * This file was auto-generated by Fern from our API Definition.
 */

import { mockServerPool } from "../mock-server/MockServerPool";
import { SquareClient } from "../../src/Client";

describe("Locations", () => {
    test("list", async () => {
        const server = mockServerPool.createServer();
        const client = new SquareClient({ token: "test", environment: server.baseUrl });

        const rawResponseBody = {
            errors: [{ category: "API_ERROR", code: "INTERNAL_SERVER_ERROR", detail: "detail", field: "field" }],
            locations: [
                {
                    id: "18YC4JDH91E1H",
                    name: "Grant Park",
                    address: {
                        address_line_1: "123 Main St",
                        locality: "San Francisco",
                        administrative_district_level_1: "CA",
                        postal_code: "94114",
                        country: "US",
                    },
                    timezone: "America/Los_Angeles",
                    capabilities: ["CREDIT_CARD_PROCESSING"],
                    status: "ACTIVE",
                    created_at: "2016-09-19T17:33:12Z",
                    merchant_id: "3MYCJG5GVYQ8Q",
                    country: "US",
                    language_code: "en-US",
                    currency: "USD",
                    phone_number: "+1 650-354-7217",
                    business_name: "Jet Fuel Coffee",
                    type: "PHYSICAL",
                    website_url: "website_url",
                    business_email: "business_email",
                    description: "description",
                    twitter_username: "twitter_username",
                    instagram_username: "instagram_username",
                    facebook_url: "facebook_url",
                    logo_url: "logo_url",
                    pos_background_url: "pos_background_url",
                    mcc: "mcc",
                    full_format_logo_url: "full_format_logo_url",
                },
                {
                    id: "3Z4V4WHQK64X9",
                    name: "Midtown",
                    address: {
                        address_line_1: "1234 Peachtree St. NE",
                        locality: "Atlanta",
                        administrative_district_level_1: "GA",
                        postal_code: "30309",
                    },
                    timezone: "America/New_York",
                    capabilities: ["CREDIT_CARD_PROCESSING"],
                    status: "ACTIVE",
                    created_at: "2022-02-19T17:58:25Z",
                    merchant_id: "3MYCJG5GVYQ8Q",
                    country: "US",
                    language_code: "en-US",
                    currency: "USD",
                    phone_number: "phone_number",
                    business_name: "Jet Fuel Coffee",
                    type: "PHYSICAL",
                    website_url: "website_url",
                    business_email: "business_email",
                    description: "Midtown Atlanta store",
                    twitter_username: "twitter_username",
                    instagram_username: "instagram_username",
                    facebook_url: "facebook_url",
                    coordinates: { latitude: 33.7889, longitude: -84.3841 },
                    logo_url: "logo_url",
                    pos_background_url: "pos_background_url",
                    mcc: "7299",
                    full_format_logo_url: "full_format_logo_url",
                },
            ],
        };
        server.mockEndpoint().get("/v2/locations").respondWith().statusCode(200).jsonBody(rawResponseBody).build();

        const response = await client.locations.list();
        expect(response).toEqual({
            errors: [
                {
                    category: "API_ERROR",
                    code: "INTERNAL_SERVER_ERROR",
                    detail: "detail",
                    field: "field",
                },
            ],
            locations: [
                {
                    id: "18YC4JDH91E1H",
                    name: "Grant Park",
                    address: {
                        addressLine1: "123 Main St",
                        locality: "San Francisco",
                        administrativeDistrictLevel1: "CA",
                        postalCode: "94114",
                        country: "US",
                    },
                    timezone: "America/Los_Angeles",
                    capabilities: ["CREDIT_CARD_PROCESSING"],
                    status: "ACTIVE",
                    createdAt: "2016-09-19T17:33:12Z",
                    merchantId: "3MYCJG5GVYQ8Q",
                    country: "US",
                    languageCode: "en-US",
                    currency: "USD",
                    phoneNumber: "+1 650-354-7217",
                    businessName: "Jet Fuel Coffee",
                    type: "PHYSICAL",
                    websiteUrl: "website_url",
                    businessEmail: "business_email",
                    description: "description",
                    twitterUsername: "twitter_username",
                    instagramUsername: "instagram_username",
                    facebookUrl: "facebook_url",
                    logoUrl: "logo_url",
                    posBackgroundUrl: "pos_background_url",
                    mcc: "mcc",
                    fullFormatLogoUrl: "full_format_logo_url",
                },
                {
                    id: "3Z4V4WHQK64X9",
                    name: "Midtown",
                    address: {
                        addressLine1: "1234 Peachtree St. NE",
                        locality: "Atlanta",
                        administrativeDistrictLevel1: "GA",
                        postalCode: "30309",
                    },
                    timezone: "America/New_York",
                    capabilities: ["CREDIT_CARD_PROCESSING"],
                    status: "ACTIVE",
                    createdAt: "2022-02-19T17:58:25Z",
                    merchantId: "3MYCJG5GVYQ8Q",
                    country: "US",
                    languageCode: "en-US",
                    currency: "USD",
                    phoneNumber: "phone_number",
                    businessName: "Jet Fuel Coffee",
                    type: "PHYSICAL",
                    websiteUrl: "website_url",
                    businessEmail: "business_email",
                    description: "Midtown Atlanta store",
                    twitterUsername: "twitter_username",
                    instagramUsername: "instagram_username",
                    facebookUrl: "facebook_url",
                    coordinates: {
                        latitude: 33.7889,
                        longitude: -84.3841,
                    },
                    logoUrl: "logo_url",
                    posBackgroundUrl: "pos_background_url",
                    mcc: "7299",
                    fullFormatLogoUrl: "full_format_logo_url",
                },
            ],
        });
    });

    test("create", async () => {
        const server = mockServerPool.createServer();
        const client = new SquareClient({ token: "test", environment: server.baseUrl });
        const rawRequestBody = {
            location: {
                name: "Midtown",
                address: {
                    address_line_1: "1234 Peachtree St. NE",
                    locality: "Atlanta",
                    administrative_district_level_1: "GA",
                    postal_code: "30309",
                },
                description: "Midtown Atlanta store",
            },
        };
        const rawResponseBody = {
            errors: [{ category: "API_ERROR", code: "INTERNAL_SERVER_ERROR", detail: "detail", field: "field" }],
            location: {
                id: "3Z4V4WHQK64X9",
                name: "Midtown",
                address: {
                    address_line_1: "1234 Peachtree St. NE",
                    address_line_2: "address_line_2",
                    address_line_3: "address_line_3",
                    locality: "Atlanta",
                    sublocality: "sublocality",
                    sublocality_2: "sublocality_2",
                    sublocality_3: "sublocality_3",
                    administrative_district_level_1: "GA",
                    administrative_district_level_2: "administrative_district_level_2",
                    administrative_district_level_3: "administrative_district_level_3",
                    postal_code: "30309",
                    country: "ZZ",
                    first_name: "first_name",
                    last_name: "last_name",
                },
                timezone: "America/New_York",
                capabilities: ["CREDIT_CARD_PROCESSING"],
                status: "ACTIVE",
                created_at: "2022-02-19T17:58:25Z",
                merchant_id: "3MYCJG5GVYQ8Q",
                country: "US",
                language_code: "en-US",
                currency: "USD",
                phone_number: "phone_number",
                business_name: "Jet Fuel Coffee",
                type: "PHYSICAL",
                website_url: "website_url",
                business_hours: { periods: [{}] },
                business_email: "business_email",
                description: "Midtown Atlanta store",
                twitter_username: "twitter_username",
                instagram_username: "instagram_username",
                facebook_url: "facebook_url",
                coordinates: { latitude: 33.7889, longitude: -84.3841 },
                logo_url: "logo_url",
                pos_background_url: "pos_background_url",
                mcc: "7299",
                full_format_logo_url: "full_format_logo_url",
                tax_ids: {
                    eu_vat: "eu_vat",
                    fr_siret: "fr_siret",
                    fr_naf: "fr_naf",
                    es_nif: "es_nif",
                    jp_qii: "jp_qii",
                },
            },
        };
        server
            .mockEndpoint()
            .post("/v2/locations")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(200)
            .jsonBody(rawResponseBody)
            .build();

        const response = await client.locations.create({
            location: {
                name: "Midtown",
                address: {
                    addressLine1: "1234 Peachtree St. NE",
                    locality: "Atlanta",
                    administrativeDistrictLevel1: "GA",
                    postalCode: "30309",
                },
                description: "Midtown Atlanta store",
            },
        });
        expect(response).toEqual({
            errors: [
                {
                    category: "API_ERROR",
                    code: "INTERNAL_SERVER_ERROR",
                    detail: "detail",
                    field: "field",
                },
            ],
            location: {
                id: "3Z4V4WHQK64X9",
                name: "Midtown",
                address: {
                    addressLine1: "1234 Peachtree St. NE",
                    addressLine2: "address_line_2",
                    addressLine3: "address_line_3",
                    locality: "Atlanta",
                    sublocality: "sublocality",
                    sublocality2: "sublocality_2",
                    sublocality3: "sublocality_3",
                    administrativeDistrictLevel1: "GA",
                    administrativeDistrictLevel2: "administrative_district_level_2",
                    administrativeDistrictLevel3: "administrative_district_level_3",
                    postalCode: "30309",
                    country: "ZZ",
                    firstName: "first_name",
                    lastName: "last_name",
                },
                timezone: "America/New_York",
                capabilities: ["CREDIT_CARD_PROCESSING"],
                status: "ACTIVE",
                createdAt: "2022-02-19T17:58:25Z",
                merchantId: "3MYCJG5GVYQ8Q",
                country: "US",
                languageCode: "en-US",
                currency: "USD",
                phoneNumber: "phone_number",
                businessName: "Jet Fuel Coffee",
                type: "PHYSICAL",
                websiteUrl: "website_url",
                businessHours: {
                    periods: [{}],
                },
                businessEmail: "business_email",
                description: "Midtown Atlanta store",
                twitterUsername: "twitter_username",
                instagramUsername: "instagram_username",
                facebookUrl: "facebook_url",
                coordinates: {
                    latitude: 33.7889,
                    longitude: -84.3841,
                },
                logoUrl: "logo_url",
                posBackgroundUrl: "pos_background_url",
                mcc: "7299",
                fullFormatLogoUrl: "full_format_logo_url",
                taxIds: {
                    euVat: "eu_vat",
                    frSiret: "fr_siret",
                    frNaf: "fr_naf",
                    esNif: "es_nif",
                    jpQii: "jp_qii",
                },
            },
        });
    });

    test("get", async () => {
        const server = mockServerPool.createServer();
        const client = new SquareClient({ token: "test", environment: server.baseUrl });

        const rawResponseBody = {
            errors: [{ category: "API_ERROR", code: "INTERNAL_SERVER_ERROR", detail: "detail", field: "field" }],
            location: {
                id: "18YC4JDH91E1H",
                name: "Grant Park",
                address: {
                    address_line_1: "123 Main St",
                    address_line_2: "address_line_2",
                    address_line_3: "address_line_3",
                    locality: "San Francisco",
                    sublocality: "sublocality",
                    sublocality_2: "sublocality_2",
                    sublocality_3: "sublocality_3",
                    administrative_district_level_1: "CA",
                    administrative_district_level_2: "administrative_district_level_2",
                    administrative_district_level_3: "administrative_district_level_3",
                    postal_code: "94114",
                    country: "US",
                    first_name: "first_name",
                    last_name: "last_name",
                },
                timezone: "America/Los_Angeles",
                capabilities: ["CREDIT_CARD_PROCESSING"],
                status: "ACTIVE",
                created_at: "2016-09-19T17:33:12Z",
                merchant_id: "3MYCJG5GVYQ8Q",
                country: "US",
                language_code: "en-US",
                currency: "USD",
                phone_number: "+1 650-354-7217",
                business_name: "Jet Fuel Coffee",
                type: "PHYSICAL",
                website_url: "website_url",
                business_hours: { periods: [{}] },
                business_email: "business_email",
                description: "description",
                twitter_username: "twitter_username",
                instagram_username: "instagram_username",
                facebook_url: "facebook_url",
                coordinates: { latitude: 1.1, longitude: 1.1 },
                logo_url: "logo_url",
                pos_background_url: "pos_background_url",
                mcc: "mcc",
                full_format_logo_url: "full_format_logo_url",
                tax_ids: {
                    eu_vat: "eu_vat",
                    fr_siret: "fr_siret",
                    fr_naf: "fr_naf",
                    es_nif: "es_nif",
                    jp_qii: "jp_qii",
                },
            },
        };
        server
            .mockEndpoint()
            .get("/v2/locations/location_id")
            .respondWith()
            .statusCode(200)
            .jsonBody(rawResponseBody)
            .build();

        const response = await client.locations.get({
            locationId: "location_id",
        });
        expect(response).toEqual({
            errors: [
                {
                    category: "API_ERROR",
                    code: "INTERNAL_SERVER_ERROR",
                    detail: "detail",
                    field: "field",
                },
            ],
            location: {
                id: "18YC4JDH91E1H",
                name: "Grant Park",
                address: {
                    addressLine1: "123 Main St",
                    addressLine2: "address_line_2",
                    addressLine3: "address_line_3",
                    locality: "San Francisco",
                    sublocality: "sublocality",
                    sublocality2: "sublocality_2",
                    sublocality3: "sublocality_3",
                    administrativeDistrictLevel1: "CA",
                    administrativeDistrictLevel2: "administrative_district_level_2",
                    administrativeDistrictLevel3: "administrative_district_level_3",
                    postalCode: "94114",
                    country: "US",
                    firstName: "first_name",
                    lastName: "last_name",
                },
                timezone: "America/Los_Angeles",
                capabilities: ["CREDIT_CARD_PROCESSING"],
                status: "ACTIVE",
                createdAt: "2016-09-19T17:33:12Z",
                merchantId: "3MYCJG5GVYQ8Q",
                country: "US",
                languageCode: "en-US",
                currency: "USD",
                phoneNumber: "+1 650-354-7217",
                businessName: "Jet Fuel Coffee",
                type: "PHYSICAL",
                websiteUrl: "website_url",
                businessHours: {
                    periods: [{}],
                },
                businessEmail: "business_email",
                description: "description",
                twitterUsername: "twitter_username",
                instagramUsername: "instagram_username",
                facebookUrl: "facebook_url",
                coordinates: {
                    latitude: 1.1,
                    longitude: 1.1,
                },
                logoUrl: "logo_url",
                posBackgroundUrl: "pos_background_url",
                mcc: "mcc",
                fullFormatLogoUrl: "full_format_logo_url",
                taxIds: {
                    euVat: "eu_vat",
                    frSiret: "fr_siret",
                    frNaf: "fr_naf",
                    esNif: "es_nif",
                    jpQii: "jp_qii",
                },
            },
        });
    });

    test("update", async () => {
        const server = mockServerPool.createServer();
        const client = new SquareClient({ token: "test", environment: server.baseUrl });
        const rawRequestBody = {
            location: {
                business_hours: {
                    periods: [
                        { day_of_week: "FRI", start_local_time: "07:00", end_local_time: "18:00" },
                        { day_of_week: "SAT", start_local_time: "07:00", end_local_time: "18:00" },
                        { day_of_week: "SUN", start_local_time: "09:00", end_local_time: "15:00" },
                    ],
                },
                description: "Midtown Atlanta store - Open weekends",
            },
        };
        const rawResponseBody = {
            errors: [{ category: "API_ERROR", code: "INTERNAL_SERVER_ERROR", detail: "detail", field: "field" }],
            location: {
                id: "3Z4V4WHQK64X9",
                name: "Midtown",
                address: {
                    address_line_1: "1234 Peachtree St. NE",
                    address_line_2: "address_line_2",
                    address_line_3: "address_line_3",
                    locality: "Atlanta",
                    sublocality: "sublocality",
                    sublocality_2: "sublocality_2",
                    sublocality_3: "sublocality_3",
                    administrative_district_level_1: "GA",
                    administrative_district_level_2: "administrative_district_level_2",
                    administrative_district_level_3: "administrative_district_level_3",
                    postal_code: "30309",
                    country: "ZZ",
                    first_name: "first_name",
                    last_name: "last_name",
                },
                timezone: "America/New_York",
                capabilities: ["CREDIT_CARD_PROCESSING"],
                status: "ACTIVE",
                created_at: "2022-02-19T17:58:25Z",
                merchant_id: "3MYCJG5GVYQ8Q",
                country: "US",
                language_code: "en-US",
                currency: "USD",
                phone_number: "phone_number",
                business_name: "Jet Fuel Coffee",
                type: "PHYSICAL",
                website_url: "website_url",
                business_hours: {
                    periods: [
                        { day_of_week: "FRI", start_local_time: "07:00", end_local_time: "18:00" },
                        { day_of_week: "SAT", start_local_time: "07:00", end_local_time: "18:00" },
                        { day_of_week: "SUN", start_local_time: "09:00", end_local_time: "15:00" },
                    ],
                },
                business_email: "business_email",
                description: "Midtown Atlanta store - Open weekends",
                twitter_username: "twitter_username",
                instagram_username: "instagram_username",
                facebook_url: "facebook_url",
                coordinates: { latitude: 33.7889, longitude: -84.3841 },
                logo_url: "logo_url",
                pos_background_url: "pos_background_url",
                mcc: "7299",
                full_format_logo_url: "full_format_logo_url",
                tax_ids: {
                    eu_vat: "eu_vat",
                    fr_siret: "fr_siret",
                    fr_naf: "fr_naf",
                    es_nif: "es_nif",
                    jp_qii: "jp_qii",
                },
            },
        };
        server
            .mockEndpoint()
            .put("/v2/locations/location_id")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(200)
            .jsonBody(rawResponseBody)
            .build();

        const response = await client.locations.update({
            locationId: "location_id",
            location: {
                businessHours: {
                    periods: [
                        {
                            dayOfWeek: "FRI",
                            startLocalTime: "07:00",
                            endLocalTime: "18:00",
                        },
                        {
                            dayOfWeek: "SAT",
                            startLocalTime: "07:00",
                            endLocalTime: "18:00",
                        },
                        {
                            dayOfWeek: "SUN",
                            startLocalTime: "09:00",
                            endLocalTime: "15:00",
                        },
                    ],
                },
                description: "Midtown Atlanta store - Open weekends",
            },
        });
        expect(response).toEqual({
            errors: [
                {
                    category: "API_ERROR",
                    code: "INTERNAL_SERVER_ERROR",
                    detail: "detail",
                    field: "field",
                },
            ],
            location: {
                id: "3Z4V4WHQK64X9",
                name: "Midtown",
                address: {
                    addressLine1: "1234 Peachtree St. NE",
                    addressLine2: "address_line_2",
                    addressLine3: "address_line_3",
                    locality: "Atlanta",
                    sublocality: "sublocality",
                    sublocality2: "sublocality_2",
                    sublocality3: "sublocality_3",
                    administrativeDistrictLevel1: "GA",
                    administrativeDistrictLevel2: "administrative_district_level_2",
                    administrativeDistrictLevel3: "administrative_district_level_3",
                    postalCode: "30309",
                    country: "ZZ",
                    firstName: "first_name",
                    lastName: "last_name",
                },
                timezone: "America/New_York",
                capabilities: ["CREDIT_CARD_PROCESSING"],
                status: "ACTIVE",
                createdAt: "2022-02-19T17:58:25Z",
                merchantId: "3MYCJG5GVYQ8Q",
                country: "US",
                languageCode: "en-US",
                currency: "USD",
                phoneNumber: "phone_number",
                businessName: "Jet Fuel Coffee",
                type: "PHYSICAL",
                websiteUrl: "website_url",
                businessHours: {
                    periods: [
                        {
                            dayOfWeek: "FRI",
                            startLocalTime: "07:00",
                            endLocalTime: "18:00",
                        },
                        {
                            dayOfWeek: "SAT",
                            startLocalTime: "07:00",
                            endLocalTime: "18:00",
                        },
                        {
                            dayOfWeek: "SUN",
                            startLocalTime: "09:00",
                            endLocalTime: "15:00",
                        },
                    ],
                },
                businessEmail: "business_email",
                description: "Midtown Atlanta store - Open weekends",
                twitterUsername: "twitter_username",
                instagramUsername: "instagram_username",
                facebookUrl: "facebook_url",
                coordinates: {
                    latitude: 33.7889,
                    longitude: -84.3841,
                },
                logoUrl: "logo_url",
                posBackgroundUrl: "pos_background_url",
                mcc: "7299",
                fullFormatLogoUrl: "full_format_logo_url",
                taxIds: {
                    euVat: "eu_vat",
                    frSiret: "fr_siret",
                    frNaf: "fr_naf",
                    esNif: "es_nif",
                    jpQii: "jp_qii",
                },
            },
        });
    });

    test("checkouts", async () => {
        const server = mockServerPool.createServer();
        const client = new SquareClient({ token: "test", environment: server.baseUrl });
        const rawRequestBody = {
            idempotency_key: "86ae1696-b1e3-4328-af6d-f1e04d947ad6",
            order: {
                order: {
                    location_id: "location_id",
                    reference_id: "reference_id",
                    customer_id: "customer_id",
                    line_items: [
                        {
                            name: "Printed T Shirt",
                            quantity: "2",
                            applied_taxes: [{ tax_uid: "38ze1696-z1e3-5628-af6d-f1e04d947fg3" }],
                            applied_discounts: [{ discount_uid: "56ae1696-z1e3-9328-af6d-f1e04d947gd4" }],
                            base_price_money: { amount: BigInt(1500), currency: "USD" },
                        },
                        {
                            name: "Slim Jeans",
                            quantity: "1",
                            base_price_money: { amount: BigInt(2500), currency: "USD" },
                        },
                        {
                            name: "Woven Sweater",
                            quantity: "3",
                            base_price_money: { amount: BigInt(3500), currency: "USD" },
                        },
                    ],
                    taxes: [
                        {
                            uid: "38ze1696-z1e3-5628-af6d-f1e04d947fg3",
                            type: "INCLUSIVE",
                            percentage: "7.75",
                            scope: "LINE_ITEM",
                        },
                    ],
                    discounts: [
                        {
                            uid: "56ae1696-z1e3-9328-af6d-f1e04d947gd4",
                            type: "FIXED_AMOUNT",
                            amount_money: { amount: BigInt(100), currency: "USD" },
                            scope: "LINE_ITEM",
                        },
                    ],
                },
                idempotency_key: "12ae1696-z1e3-4328-af6d-f1e04d947gd4",
            },
            ask_for_shipping_address: true,
            merchant_support_email: "merchant+support@website.com",
            pre_populate_buyer_email: "example@email.com",
            pre_populate_shipping_address: {
                address_line_1: "1455 Market St.",
                address_line_2: "Suite 600",
                locality: "San Francisco",
                administrative_district_level_1: "CA",
                postal_code: "94103",
                country: "US",
                first_name: "Jane",
                last_name: "Doe",
            },
            redirect_url: "https://merchant.website.com/order-confirm",
            additional_recipients: [
                {
                    location_id: "057P5VYJ4A5X1",
                    description: "Application fees",
                    amount_money: { amount: BigInt(60), currency: "USD" },
                },
            ],
        };
        const rawResponseBody = {
            checkout: {
                id: "CAISEHGimXh-C3RIT4og1a6u1qw",
                checkout_page_url:
                    "https://connect.squareup.com/v2/checkout?c=CAISEHGimXh-C3RIT4og1a6u1qw&l=CYTKRM7R7JMV8",
                ask_for_shipping_address: true,
                merchant_support_email: "merchant+support@website.com",
                pre_populate_buyer_email: "example@email.com",
                pre_populate_shipping_address: {
                    address_line_1: "1455 Market St.",
                    address_line_2: "Suite 600",
                    address_line_3: "address_line_3",
                    locality: "San Francisco",
                    sublocality: "sublocality",
                    sublocality_2: "sublocality_2",
                    sublocality_3: "sublocality_3",
                    administrative_district_level_1: "CA",
                    administrative_district_level_2: "administrative_district_level_2",
                    administrative_district_level_3: "administrative_district_level_3",
                    postal_code: "94103",
                    country: "US",
                    first_name: "Jane",
                    last_name: "Doe",
                },
                redirect_url: "https://merchant.website.com/order-confirm",
                order: {
                    id: "id",
                    location_id: "location_id",
                    reference_id: "reference_id",
                    customer_id: "customer_id",
                    line_items: [
                        {
                            name: "Printed T Shirt",
                            quantity: "2",
                            applied_taxes: [
                                {
                                    tax_uid: "38ze1696-z1e3-5628-af6d-f1e04d947fg3",
                                    applied_money: { amount: BigInt(103), currency: "USD" },
                                },
                            ],
                            applied_discounts: [
                                {
                                    discount_uid: "56ae1696-z1e3-9328-af6d-f1e04d947gd4",
                                    applied_money: { amount: BigInt(100), currency: "USD" },
                                },
                            ],
                            base_price_money: { amount: BigInt(1500), currency: "USD" },
                            total_tax_money: { amount: BigInt(103), currency: "USD" },
                            total_discount_money: { amount: BigInt(100), currency: "USD" },
                            total_money: { amount: BigInt(1503), currency: "USD" },
                        },
                        {
                            name: "Slim Jeans",
                            quantity: "1",
                            base_price_money: { amount: BigInt(2500), currency: "USD" },
                            total_money: { amount: BigInt(2500), currency: "USD" },
                        },
                        {
                            name: "Woven Sweater",
                            quantity: "3",
                            base_price_money: { amount: BigInt(3500), currency: "USD" },
                            total_money: { amount: BigInt(10500), currency: "USD" },
                        },
                    ],
                    taxes: [
                        {
                            uid: "38ze1696-z1e3-5628-af6d-f1e04d947fg3",
                            type: "INCLUSIVE",
                            percentage: "7.75",
                            scope: "LINE_ITEM",
                        },
                    ],
                    discounts: [
                        {
                            uid: "56ae1696-z1e3-9328-af6d-f1e04d947gd4",
                            type: "FIXED_AMOUNT",
                            amount_money: { amount: BigInt(100), currency: "USD" },
                            applied_money: { amount: BigInt(100), currency: "USD" },
                            scope: "LINE_ITEM",
                        },
                    ],
                    service_charges: [{}],
                    fulfillments: [{}],
                    returns: [{}],
                    tenders: [{ type: "CARD" }],
                    refunds: [
                        { id: "id", location_id: "location_id", reason: "reason", amount_money: {}, status: "PENDING" },
                    ],
                    created_at: "created_at",
                    updated_at: "updated_at",
                    closed_at: "closed_at",
                    state: "OPEN",
                    version: 1,
                    total_money: { amount: BigInt(14503), currency: "USD" },
                    total_tax_money: { amount: BigInt(103), currency: "USD" },
                    total_discount_money: { amount: BigInt(100), currency: "USD" },
                    ticket_name: "ticket_name",
                    rewards: [{ id: "id", reward_tier_id: "reward_tier_id" }],
                },
                created_at: "2017-06-16T22:25:35Z",
                additional_recipients: [
                    {
                        location_id: "057P5VYJ4A5X1",
                        description: "Application fees",
                        amount_money: { amount: BigInt(60), currency: "USD" },
                    },
                ],
            },
            errors: [{ category: "API_ERROR", code: "INTERNAL_SERVER_ERROR", detail: "detail", field: "field" }],
        };
        server
            .mockEndpoint()
            .post("/v2/locations/location_id/checkouts")
            .jsonBody(rawRequestBody)
            .respondWith()
            .statusCode(200)
            .jsonBody(rawResponseBody)
            .build();

        const response = await client.locations.checkouts({
            locationId: "location_id",
            idempotencyKey: "86ae1696-b1e3-4328-af6d-f1e04d947ad6",
            order: {
                order: {
                    locationId: "location_id",
                    referenceId: "reference_id",
                    customerId: "customer_id",
                    lineItems: [
                        {
                            name: "Printed T Shirt",
                            quantity: "2",
                            appliedTaxes: [
                                {
                                    taxUid: "38ze1696-z1e3-5628-af6d-f1e04d947fg3",
                                },
                            ],
                            appliedDiscounts: [
                                {
                                    discountUid: "56ae1696-z1e3-9328-af6d-f1e04d947gd4",
                                },
                            ],
                            basePriceMoney: {
                                amount: BigInt("1500"),
                                currency: "USD",
                            },
                        },
                        {
                            name: "Slim Jeans",
                            quantity: "1",
                            basePriceMoney: {
                                amount: BigInt("2500"),
                                currency: "USD",
                            },
                        },
                        {
                            name: "Woven Sweater",
                            quantity: "3",
                            basePriceMoney: {
                                amount: BigInt("3500"),
                                currency: "USD",
                            },
                        },
                    ],
                    taxes: [
                        {
                            uid: "38ze1696-z1e3-5628-af6d-f1e04d947fg3",
                            type: "INCLUSIVE",
                            percentage: "7.75",
                            scope: "LINE_ITEM",
                        },
                    ],
                    discounts: [
                        {
                            uid: "56ae1696-z1e3-9328-af6d-f1e04d947gd4",
                            type: "FIXED_AMOUNT",
                            amountMoney: {
                                amount: BigInt("100"),
                                currency: "USD",
                            },
                            scope: "LINE_ITEM",
                        },
                    ],
                },
                idempotencyKey: "12ae1696-z1e3-4328-af6d-f1e04d947gd4",
            },
            askForShippingAddress: true,
            merchantSupportEmail: "merchant+support@website.com",
            prePopulateBuyerEmail: "example@email.com",
            prePopulateShippingAddress: {
                addressLine1: "1455 Market St.",
                addressLine2: "Suite 600",
                locality: "San Francisco",
                administrativeDistrictLevel1: "CA",
                postalCode: "94103",
                country: "US",
                firstName: "Jane",
                lastName: "Doe",
            },
            redirectUrl: "https://merchant.website.com/order-confirm",
            additionalRecipients: [
                {
                    locationId: "057P5VYJ4A5X1",
                    description: "Application fees",
                    amountMoney: {
                        amount: BigInt("60"),
                        currency: "USD",
                    },
                },
            ],
        });
        expect(response).toEqual({
            checkout: {
                id: "CAISEHGimXh-C3RIT4og1a6u1qw",
                checkoutPageUrl:
                    "https://connect.squareup.com/v2/checkout?c=CAISEHGimXh-C3RIT4og1a6u1qw&l=CYTKRM7R7JMV8",
                askForShippingAddress: true,
                merchantSupportEmail: "merchant+support@website.com",
                prePopulateBuyerEmail: "example@email.com",
                prePopulateShippingAddress: {
                    addressLine1: "1455 Market St.",
                    addressLine2: "Suite 600",
                    addressLine3: "address_line_3",
                    locality: "San Francisco",
                    sublocality: "sublocality",
                    sublocality2: "sublocality_2",
                    sublocality3: "sublocality_3",
                    administrativeDistrictLevel1: "CA",
                    administrativeDistrictLevel2: "administrative_district_level_2",
                    administrativeDistrictLevel3: "administrative_district_level_3",
                    postalCode: "94103",
                    country: "US",
                    firstName: "Jane",
                    lastName: "Doe",
                },
                redirectUrl: "https://merchant.website.com/order-confirm",
                order: {
                    id: "id",
                    locationId: "location_id",
                    referenceId: "reference_id",
                    customerId: "customer_id",
                    lineItems: [
                        {
                            name: "Printed T Shirt",
                            quantity: "2",
                            appliedTaxes: [
                                {
                                    taxUid: "38ze1696-z1e3-5628-af6d-f1e04d947fg3",
                                    appliedMoney: {
                                        amount: BigInt("103"),
                                        currency: "USD",
                                    },
                                },
                            ],
                            appliedDiscounts: [
                                {
                                    discountUid: "56ae1696-z1e3-9328-af6d-f1e04d947gd4",
                                    appliedMoney: {
                                        amount: BigInt("100"),
                                        currency: "USD",
                                    },
                                },
                            ],
                            basePriceMoney: {
                                amount: BigInt("1500"),
                                currency: "USD",
                            },
                            totalTaxMoney: {
                                amount: BigInt("103"),
                                currency: "USD",
                            },
                            totalDiscountMoney: {
                                amount: BigInt("100"),
                                currency: "USD",
                            },
                            totalMoney: {
                                amount: BigInt("1503"),
                                currency: "USD",
                            },
                        },
                        {
                            name: "Slim Jeans",
                            quantity: "1",
                            basePriceMoney: {
                                amount: BigInt("2500"),
                                currency: "USD",
                            },
                            totalMoney: {
                                amount: BigInt("2500"),
                                currency: "USD",
                            },
                        },
                        {
                            name: "Woven Sweater",
                            quantity: "3",
                            basePriceMoney: {
                                amount: BigInt("3500"),
                                currency: "USD",
                            },
                            totalMoney: {
                                amount: BigInt("10500"),
                                currency: "USD",
                            },
                        },
                    ],
                    taxes: [
                        {
                            uid: "38ze1696-z1e3-5628-af6d-f1e04d947fg3",
                            type: "INCLUSIVE",
                            percentage: "7.75",
                            scope: "LINE_ITEM",
                        },
                    ],
                    discounts: [
                        {
                            uid: "56ae1696-z1e3-9328-af6d-f1e04d947gd4",
                            type: "FIXED_AMOUNT",
                            amountMoney: {
                                amount: BigInt("100"),
                                currency: "USD",
                            },
                            appliedMoney: {
                                amount: BigInt("100"),
                                currency: "USD",
                            },
                            scope: "LINE_ITEM",
                        },
                    ],
                    serviceCharges: [{}],
                    fulfillments: [{}],
                    returns: [{}],
                    tenders: [
                        {
                            type: "CARD",
                        },
                    ],
                    refunds: [
                        {
                            id: "id",
                            locationId: "location_id",
                            reason: "reason",
                            amountMoney: {},
                            status: "PENDING",
                        },
                    ],
                    createdAt: "created_at",
                    updatedAt: "updated_at",
                    closedAt: "closed_at",
                    state: "OPEN",
                    version: 1,
                    totalMoney: {
                        amount: BigInt("14503"),
                        currency: "USD",
                    },
                    totalTaxMoney: {
                        amount: BigInt("103"),
                        currency: "USD",
                    },
                    totalDiscountMoney: {
                        amount: BigInt("100"),
                        currency: "USD",
                    },
                    ticketName: "ticket_name",
                    rewards: [
                        {
                            id: "id",
                            rewardTierId: "reward_tier_id",
                        },
                    ],
                },
                createdAt: "2017-06-16T22:25:35Z",
                additionalRecipients: [
                    {
                        locationId: "057P5VYJ4A5X1",
                        description: "Application fees",
                        amountMoney: {
                            amount: BigInt("60"),
                            currency: "USD",
                        },
                    },
                ],
            },
            errors: [
                {
                    category: "API_ERROR",
                    code: "INTERNAL_SERVER_ERROR",
                    detail: "detail",
                    field: "field",
                },
            ],
        });
    });
});
